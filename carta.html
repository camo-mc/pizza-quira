<h3 class="text-danger mb-3">Carta - Pizzas</h3>
<div class="card mb-4">
  <div class="card-body">
    <form id="pizzaForm">
      <!-- Selección de tamaño -->
      <div class="mb-3">
        <label for="pizzaSize" class="form-label">Tamaño:</label>
        <select id="pizzaSize" class="form-select">
          <option value="">Seleccione un tamaño</option>
          <option value="porcion">Porción</option>
          <option value="personal">Personal</option>
          <option value="mediana">Mediana</option>
          <option value="familiar">Familiar</option>
        </select>
      </div>
      <!-- Contenedor para los desplegables de sabores -->
      <div id="flavorContainer"></div>
      <!-- Precio calculado -->
      <div class="mb-3">
        <p id="calculatedPrice" class="fw-bold"></p>
      </div>
      <button type="button" class="btn btn-success" onclick="addPizzaToCart()">Agregar Pizza</button>
    </form>
  </div>
</div>

<h3 class="text-danger mb-3">Carta - Hamburguesas</h3>
<div class="accordion mb-4" id="hamburguesasAccordion">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#hamburguesasContent" aria-expanded="false">
        Ver Hamburguesas
      </button>
    </h2>
    <div id="hamburguesasContent" class="accordion-collapse collapse">
      <div class="accordion-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span>Hamburguesa Clásica ($10,000)</span>
          <button class="btn btn-sm btn-success" onclick="addToCart('Hamburguesa Clásica', 10000, null)">Agregar</button>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span>Hamburguesa BBQ ($12,000)</span>
          <button class="btn btn-sm btn-success" onclick="addToCart('Hamburguesa BBQ', 12000, null)">Agregar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<h3 class="text-danger mb-3">Carta - Bebidas</h3>
<div class="accordion mb-4" id="bebidasAccordion">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bebidasContent" aria-expanded="false">
        Ver Bebidas
      </button>
    </h2>
    <div id="bebidasContent" class="accordion-collapse collapse">
      <div class="accordion-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span>Gaseosa 500ml ($3,000)</span>
          <button class="btn btn-sm btn-success" onclick="addToCart('Gaseosa 500ml', 3000, null)">Agregar</button>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span>Jugo Natural ($4,000)</span>
          <button class="btn btn-sm btn-success" onclick="addToCart('Jugo Natural', 4000, null)">Agregar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Función para agregar la pizza al carrito usando la lógica definida en script.js
function addPizzaToCart() {
  const size = document.getElementById("pizzaSize").value;
  if (!size) {
    alert("Seleccione un tamaño para la pizza.");
    return;
  }
  let dropdownCount = (size === "porcion") ? 1 : (size === "personal" || size === "mediana") ? 2 : 3;
  let flavors = [];
  for (let i = 1; i <= dropdownCount; i++) {
    const flavor = document.getElementById("flavor" + i).value;
    if (!flavor) {
      alert("Seleccione el sabor en la opción " + i);
      return;
    }
    flavors.push(flavor);
  }
  // Obtiene el precio mostrado
  let priceText = document.getElementById("calculatedPrice").textContent;
  if (!priceText) {
    alert("No se pudo calcular el precio.");
    return;
  }
  let price = parseInt(priceText.replace(/[^0-9]/g, ""), 10);
  const itemName = "Pizza " + size.charAt(0).toUpperCase() + size.slice(1) + " (" + flavors.join(", ") + ")";
  addToCart(itemName, price, null);
  alert("Pizza agregada: " + itemName + " - $" + price.toLocaleString());
}

// Se debe llamar a initializePizzaSection() después de cargar este archivo dinámicamente.
</script>
